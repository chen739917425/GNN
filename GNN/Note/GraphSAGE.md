### GraphSAGE

#### 采样邻居

* 每个节点对邻居采取**采样**的策略进行聚合
* 为每一层设置一个超参数，**采样倍率$S_k$**
* 在第$k$层的邻居聚合中，每个节点采样的一阶邻居的总数不超过$S_k$
* 整个过程中，对于一个节点而言，涉及到的节点总数规模为$O(\prod_{k=1}^{K}S_k)$

#### 聚合邻居

* 对聚合节点数量自适应

* 对聚合节点保持排列不变性

* 操作算子

  * 平均/加和聚合算子

  $$
  Agg^{sum}=\sigma(SUM\{Wh_j+b,\forall v_j\in N(v_i)\})
  $$

  * 池化聚合算子

  $$
  Agg^{pool}=MAX\{\sigma(Wh_j+b),\forall v_j \in N(v_i)\}
  $$

#### 算法过程

* 初始化每个节点的表示
* 对于每一层$k$
  * 对于每个节点$v$
    * 使用当前层的聚合函数，聚合节点$v$的所有邻点$u$在上一层的表示$h_u^{k-1}$，得到邻点聚合后的特征表示$h_{N(v)}^k$
    * 将$h_{N(v)}^k$与$v$本身在上一层的表示$h_v^{k-1}$拼接，并对结果进行线性变换，再套上非线性的激活函数，得到当前层节点$v$的表示$h_v^k$
    * 对$h_v^k$归一化
* 每个节点$v$的最终表示$z_v$为$h_v^K$

#### 归纳学习

* **GraphSAGE**属于**归纳学习（Inductive Learning）**，学习的是每层聚合操作中聚合函数里的参数，可以理解为学习的是聚合的方法。这样面对图的变化，每个点只需遍历得到$K$阶子图，然后通过上述的采样、聚合邻居的操作，即可得到该节点新的$embedding$。此外也可以迁移到新的类似的graph上，直接使用。

